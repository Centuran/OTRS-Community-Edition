!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/simple.js",["../../lib/codemirror"],b):b(CodeMirror)}(function(b){function m(e,a){if(!e.hasOwnProperty(a))throw Error("Undefined state "+a+" in simple mode");}function w(e,a){if(!e)return/(?:)/;var b="";return e instanceof RegExp?(e.ignoreCase&&(b="i"),e=e.source):e=String(e),new RegExp((!1===a?"":"^")+"(?:"+e+")",b)}function x(e){if(!e)return null;
if(e.apply)return e;if("string"==typeof e)return e.replace(/\./g," ");for(var a=[],b=0;b<e.length;b++)a.push(e[b]&&e[b].replace(/\./g," "));return a}function a(a,b){(a.next||a.push)&&m(b,a.next||a.push);this.regex=w(a.regex);this.token=x(a.token);this.data=a}function g(a,g){return function(p,d){if(d.pending){var f=d.pending.shift();return 0==d.pending.length&&(d.pending=null),p.pos+=f.text.length,f.token}if(d.local){if(d.local.end&&p.match(d.local.end))return f=d.local.endToken||null,d.local=d.localState=
null,f;var l,f=d.local.mode.token(p,d.localState);return d.local.endScan&&(l=d.local.endScan.exec(p.current()))&&(p.pos=p.start+l.index),f}for(var q=a[d.state],h=0;h<q.length;h++)if(f=q[h],l=(!f.data.sol||p.sol())&&p.match(f.regex)){f.data.next?d.state=f.data.next:f.data.push?((d.stack||(d.stack=[])).push(d.state),d.state=f.data.push):f.data.pop&&d.stack&&d.stack.length&&(d.state=d.stack.pop());if(f.data.mode){var k=g,q=d,h=f.data.mode,m=f.token,t=void 0;if(h.persistent)for(var y=q.persistentStates;y&&
!t;y=y.next)(h.spec?c(h.spec,y.spec):h.mode==y.mode)&&(t=y);k=t?t.mode:h.mode||b.getMode(k,h.spec);y=t?t.state:b.startState(k);h.persistent&&!t&&(q.persistentStates={mode:k,spec:h.spec,state:y,next:q.persistentStates});q.localState=y;q.local={mode:k,end:h.end&&w(h.end),endScan:h.end&&!1!==h.forceEnd&&w(h.end,!1),endToken:m&&m.join?m[m.length-1]:m}}f.data.indent&&d.indent.push(p.indentation()+g.indentUnit);f.data.dedent&&d.indent.pop();q=f.token;if(q&&q.apply&&(q=q(l)),2<l.length&&f.token&&"string"!=
typeof f.token){d.pending=[];for(h=2;h<l.length;h++)l[h]&&d.pending.push({text:l[h],token:f.token[h-1]});return p.backUp(l[0].length-(l[1]?l[1].length:0)),q[0]}return q&&q.join?q[0]:q}return p.next(),null}}function c(a,b){if(a===b)return!0;if(!a||"object"!=typeof a||!b||"object"!=typeof b)return!1;var g=0,d;for(d in a)if(a.hasOwnProperty(d)){if(!b.hasOwnProperty(d)||!c(a[d],b[d]))return!1;g++}for(d in b)b.hasOwnProperty(d)&&g--;return 0==g}function k(a,g){return function(c,d,f){if(c.local&&c.local.mode.indent)return c.local.mode.indent(c.localState,
d,f);if(!(f=null==c.indent||c.local)&&(f=g.dontIndentStates)){a:{f=g.dontIndentStates;for(var l=0;l<f.length;l++)if(f[l]===c.state){f=!0;break a}f=void 0}f=-1<f}if(f)return b.Pass;f=c.indent.length-1;l=a[c.state];a:for(;;){for(var k=0;k<l.length;k++){var h=l[k];if(h.data.dedent&&!1!==h.data.dedentIfLineStart){var m=h.regex.exec(d);if(m&&m[0]){f--;(h.next||h.push)&&(l=a[h.next||h.push]);d=d.slice(m[0].length);continue a}}}break}return 0>f?0:c.indent[f]}}b.defineSimpleMode=function(a,c){b.defineMode(a,
function(a){return b.simpleMode(a,c)})};b.simpleMode=function(c,r){m(r,"start");var p={},d=r.meta||{},f=!1,l;for(l in r)if(l!=d&&r.hasOwnProperty(l))for(var q=p[l]=[],h=r[l],w=0;w<h.length;w++){var x=h[w];q.push(new a(x,r));(x.indent||x.dedent)&&(f=!0)}p={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:f?[]:null}},copyState:function(a){var c={state:a.state,pending:a.pending,local:a.local,localState:null,indent:a.indent&&a.indent.slice(0)};a.localState&&(c.localState=
b.copyState(a.local.mode,a.localState));a.stack&&(c.stack=a.stack.slice(0));for(var d=a.persistentStates;d;d=d.next)c.persistentStates={mode:d.mode,spec:d.spec,state:d.state==a.localState?c.localState:b.copyState(d.mode,d.state),next:c.persistentStates};return c},token:g(p,c),innerMode:function(a){return a.local&&{mode:a.local.mode,state:a.localState}},indent:k(p,d)};if(d)for(var t in d)d.hasOwnProperty(t)&&(p[t]=d[t]);return p}});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/multiplex",["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.multiplexingMode=function(m){function w(a,b,c,k){return"string"==typeof b?(c=a.indexOf(b,c),k&&-1<c?c+b.length:c):(b=b.exec(c?a.slice(c):a))?b.index+c+(k?b[0].length:0):-1}var x=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:b.startState(m),innerActive:null,
inner:null}},copyState:function(a){return{outer:b.copyState(m,a.outer),innerActive:a.innerActive,inner:a.innerActive&&b.copyState(a.innerActive.mode,a.inner)}},token:function(a,g){if(g.innerActive){var c=g.innerActive,k=a.string;if(!c.close&&a.sol())return g.innerActive=g.inner=null,this.token(a,g);var e=c.close?w(k,c.close,a.pos,c.parseDelimiters):-1;if(e==a.pos&&!c.parseDelimiters)return a.match(c.close),g.innerActive=g.inner=null,c.delimStyle&&c.delimStyle+" "+c.delimStyle+"-close";-1<e&&(a.string=
k.slice(0,e));var r=c.mode.token(a,g.inner);return-1<e&&(a.string=k),e==a.pos&&c.parseDelimiters&&(g.innerActive=g.inner=null),c.innerStyle&&(r=r?r+" "+c.innerStyle:c.innerStyle),r}for(var r=1/0,k=a.string,p=0;p<x.length;++p){c=x[p];e=w(k,c.open,a.pos);if(e==a.pos)return c.parseDelimiters||a.match(c.open),g.innerActive=c,k=0,m.indent&&(e=m.indent(g.outer,"",""),e!==b.Pass&&(k=e)),g.inner=b.startState(c.mode,k),c.delimStyle&&c.delimStyle+" "+c.delimStyle+"-open";-1!=e&&e<r&&(r=e)}r!=1/0&&(a.string=
k.slice(0,r));e=m.token(a,g.outer);return r!=1/0&&(a.string=k),e},indent:function(a,g,c){var k=a.innerActive?a.innerActive.mode:m;return k.indent?k.indent(a.innerActive?a.inner:a.outer,g,c):b.Pass},blankLine:function(a){var g=a.innerActive?a.innerActive.mode:m;if(g.blankLine&&g.blankLine(a.innerActive?a.inner:a.outer),a.innerActive)"\n"===a.innerActive.close&&(a.innerActive=a.inner=null);else for(var c=0;c<x.length;++c){var k=x[c];"\n"===k.open&&(a.innerActive=k,a.inner=b.startState(k.mode,g.indent?
g.indent(a.outer,"",""):0))}},electricChars:m.electricChars,innerMode:function(a){return a.inner?{state:a.inner,mode:a.innerActive.mode}:{state:a.outer,mode:m}}}}});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("../../addon/mode/simple"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define("mode/handlebars/handlebars.js",["../../lib/codemirror","../../addon/mode/simple","../../addon/mode/multiplex"],b):b(CodeMirror)})(function(b){b.defineSimpleMode("handlebars-tags",{start:[{regex:/\{\{\{/,push:"handlebars_raw",token:"tag"},{regex:/\{\{!--/,push:"dash_comment",token:"comment"},
{regex:/\{\{!/,push:"comment",token:"comment"},{regex:/\{\{/,push:"handlebars",token:"tag"}],handlebars_raw:[{regex:/\}\}\}/,pop:!0,token:"tag"}],handlebars:[{regex:/\}\}/,pop:!0,token:"tag"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"},{regex:/'(?:[^\\']|\\.)*'?/,token:"string"},{regex:/>|[#\/]([A-Za-z_]\w*)/,token:"keyword"},{regex:/(?:else|this)\b/,token:"keyword"},{regex:/\d+/i,token:"number"},{regex:/=|~|@|true|false/,token:"atom"},{regex:/(?:\.\.\/)*(?:[A-Za-z_][\w\.]*)+/,token:"variable-2"}],
dash_comment:[{regex:/--\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],comment:[{regex:/\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],meta:{blockCommentStart:"{{--",blockCommentEnd:"--}}"}});b.defineMode("handlebars",function(m,w){var x=b.getMode(m,"handlebars-tags");return w&&w.base?b.multiplexingMode(b.getMode(m,w.base),{open:"{{",close:/\}\}\}?/,mode:x,parseDelimiters:!0}):x});b.defineMIME("text/x-handlebars-template","handlebars")});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("mode/xml/xml.js",["../../lib/codemirror"],b):b(CodeMirror)})(function(b){var m={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},
contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},
allowUnquoted:!0,allowMissing:!0,caseFold:!0},w={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};b.defineMode("xml",function(x,a){function g(n,a){function C(b){return a.tokenize=b,b(n,a)}var b=n.next();if("\x3c"==b)return n.eat("!")?n.eat("[")?n.match("CDATA[")?C(e("atom","]]\x3e")):null:n.match("--")?C(e("comment","--\x3e")):n.match("DOCTYPE",!0,!0)?(n.eatWhile(/[\w\._\-]/),C(r(1))):null:n.eat("?")?(n.eatWhile(/[\w\._\-]/),
a.tokenize=e("meta","?\x3e"),"meta"):(z=n.eat("/")?"closeTag":"openTag",a.tokenize=c,"tag bracket");if("\x26"==b){var d;return d=n.eat("#")?n.eat("x")?n.eatWhile(/[a-fA-F\d]/)&&n.eat(";"):n.eatWhile(/[\d]/)&&n.eat(";"):n.eatWhile(/[\w\.\-:]/)&&n.eat(";"),d?"atom":"error"}return n.eatWhile(/[^&<]/),null}function c(n,a){var b=n.next();return"\x3e"==b||"/"==b&&n.eat("\x3e")?(a.tokenize=g,z="\x3e"==b?"endTag":"selfcloseTag","tag bracket"):"\x3d"==b?(z="equals",null):"\x3c"==b?(a.tokenize=g,a.state=l,
a.tagName=a.tagStart=null,(b=a.tokenize(n,a))?b+" tag error":"tag error"):/[\'\"]/.test(b)?(a.tokenize=k(b),a.stringStartCol=n.column(),a.tokenize(n,a)):(n.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function k(a){var b=function(b,d){for(;!b.eol();)if(b.next()==a){d.tokenize=c;break}return"string"};return b.isInAttribute=!0,b}function e(a,b){return function(d,c){for(;!d.eol();){if(d.match(b)){c.tokenize=g;break}d.next()}return a}}function r(a){return function(b,d){for(var c;null!=(c=
b.next());){if("\x3c"==c)return d.tokenize=r(a+1),d.tokenize(b,d);if("\x3e"==c){if(1==a){d.tokenize=g;break}return d.tokenize=r(a-1),d.tokenize(b,d)}}return"meta"}}function p(a,b,d){this.prev=a.context;this.tagName=b||"";this.indent=a.indented;this.startOfLine=d;(u.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)&&(this.noIndent=!0)}function d(a){a.context&&(a.context=a.context.prev)}function f(a,b){for(var c;a.context&&(c=a.context.tagName,u.contextGrabbers.hasOwnProperty(c)&&u.contextGrabbers[c].hasOwnProperty(b));)d(a)}
function l(a,b,d){return"openTag"==a?(d.tagStart=b.column(),q):"closeTag"==a?h:l}function q(a,b,d){return"word"==a?(d.tagName=b.current(),v="tag",t):u.allowMissingTagName&&"endTag"==a?(v="tag bracket",t(a,b,d)):(v="error",q)}function h(a,b,c){return"word"==a?(a=b.current(),c.context&&c.context.tagName!=a&&u.implicitlyClosed.hasOwnProperty(c.context.tagName)&&d(c),c.context&&c.context.tagName==a||!1===u.matchClosing?(v="tag",B):(v="tag error",E)):u.allowMissingTagName&&"endTag"==a?(v="tag bracket",
B(a,b,c)):(v="error",E)}function B(a,b,c){return"endTag"!=a?(v="error",B):(d(c),l)}function E(a,b,c){return v="error",B(a,b,c)}function t(a,b,c){if("word"==a)return v="attribute",y;if("endTag"==a||"selfcloseTag"==a){b=c.tagName;var d=c.tagStart;return c.tagName=c.tagStart=null,"selfcloseTag"==a||u.autoSelfClosers.hasOwnProperty(b)?f(c,b):(f(c,b),c.context=new p(c,b,d==c.indented)),l}return v="error",t}function y(a,b,c){return"equals"==a?F:(u.allowMissing||(v="error"),t(a,b,c))}function F(a,b,c){return"string"==
a?G:"word"==a&&u.allowUnquoted?(v="string",t):(v="error",t(a,b,c))}function G(a,b,c){return"string"==a?G:t(a,b,c)}var D=x.indentUnit,u={},H=a.htmlMode?m:w,A;for(A in H)u[A]=H[A];for(A in a)u[A]=a[A];var z,v;return g.isInText=!0,{startState:function(a){var b={tokenize:g,state:l,indented:a||0,tagName:null,tagStart:null,context:null};return null!=a&&(b.baseIndent=a),b},token:function(a,b){if(!b.tagName&&a.sol()&&(b.indented=a.indentation()),a.eatSpace())return null;z=null;var c=b.tokenize(a,b);return(c||
z)&&"comment"!=c&&(v=null,b.state=b.state(z||c,a,b),v&&(c="error"==v?c+" error":v)),c},indent:function(a,d,f){var e=a.context;if(a.tokenize.isInAttribute)return a.tagStart==a.indented?a.stringStartCol+1:a.indented+D;if(e&&e.noIndent)return b.Pass;if(a.tokenize!=c&&a.tokenize!=g)return f?f.match(/^(\s*)/)[0].length:0;if(a.tagName)return!1!==u.multilineTagIndentPastTag?a.tagStart+a.tagName.length+2:a.tagStart+D*(u.multilineTagIndentFactor||1);if(u.alignCDATA&&/<!\[CDATA\[/.test(d))return 0;if((d=d&&
/^<(\/)?([\w_:\.-]*)/.exec(d))&&d[1])for(;e;){if(e.tagName==d[2]){e=e.prev;break}if(!u.implicitlyClosed.hasOwnProperty(e.tagName))break;e=e.prev}else if(d)for(;e;){f=u.contextGrabbers[e.tagName];if(!f||!f.hasOwnProperty(d[2]))break;e=e.prev}for(;e&&e.prev&&!e.startOfLine;)e=e.prev;return e?e.indent+D:a.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:u.htmlMode?"html":"xml",helperType:u.htmlMode?"html":"xml",skipAttribute:function(a){a.state==
F&&(a.state=t)},xmlCurrentTag:function(a){return a.tagName?{name:a.tagName,close:"closeTag"==a.type}:null},xmlCurrentContext:function(a){var b=[];for(a=a.context;a;a=a.prev)b.push(a.tagName);return b.reverse()}}});b.defineMIME("text/xml","xml");b.defineMIME("application/xml","xml");b.mimeModes.hasOwnProperty("text/html")||b.defineMIME("text/html",{name:"xml",htmlMode:!0})});(function(b){"function"==typeof b.define&&b.define("modeHandlebars",["mode/handlebars/handlebars.js"],function(){})})(this);